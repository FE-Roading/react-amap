/*! For license information please see amap.min.js.LICENSE.txt */
!function(e,o){"object"===typeof exports&&"object"===typeof module?module.exports=o(require("react"),require("react-dom")):"function"===typeof define&&define.amd?define(["react","react-dom"],o):"object"===typeof exports?exports["@uiw/react-amap"]=o(require("react"),require("react-dom")):e["@uiw/react-amap"]=o(e.React,e.ReactDOM)}(self,(function(e,o){return(()=>{"use strict";var t={382:e=>{var o=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var o={},t=0;t<10;t++)o["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(o).map((function(e){return o[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(r){return!1}}()?Object.assign:function(e,a){for(var i,s,u=r(e),l=1;l<arguments.length;l++){for(var c in i=Object(arguments[l]))t.call(i,c)&&(u[c]=i[c]);if(o){s=o(i);for(var p=0;p<s.length;p++)n.call(i,s[p])&&(u[s[p]]=i[s[p]])}}return u}},858:(e,o,t)=>{t(382);var n=t(787),r=60103;if(60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;r=a("react.element"),a("react.fragment")}var i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,o,t){var n,a={},l=null,c=null;for(n in void 0!==t&&(l=""+t),void 0!==o.key&&(l=""+o.key),void 0!==o.ref&&(c=o.ref),o)s.call(o,n)&&!u.hasOwnProperty(n)&&(a[n]=o[n]);if(e&&e.defaultProps)for(n in o=e.defaultProps)void 0===a[n]&&(a[n]=o[n]);return{$$typeof:r,type:e,key:l,ref:c,props:a,_owner:i.current}}o.jsx=l,o.jsxs=l},664:(e,o,t)=>{e.exports=t(858)},787:o=>{o.exports=e},156:e=>{e.exports=o}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return r.d(o,{a:o}),o},r.d=(e,o)=>{for(var t in o)r.o(o,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})},r.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};return(()=>{function e(e,o,t,n,r,a,i){try{var s=e[a](i),u=s.value}catch(l){return void t(l)}s.done?o(u):Promise.resolve(u).then(n,r)}r.r(a),r.d(a,{APILoader:()=>c,AutoComplete:()=>E,BezierCurve:()=>A,Circle:()=>O,CircleMarker:()=>D,Context:()=>K,ContextMenu:()=>H,ControlBarControl:()=>B,Ellipse:()=>W,Geolocation:()=>F,HawkEyeControl:()=>Q,InfoWindow:()=>$,Map:()=>ne,MapTypeControl:()=>ie,Marker:()=>le,MassMarks:()=>de,Polygon:()=>me,PolygonEditor:()=>Me,Polyline:()=>ye,Provider:()=>te,Rectangle:()=>Ee,ScaleControl:()=>ke,Text:()=>Oe,ToolBarControl:()=>Re,Weather:()=>Ie,delay:()=>l,initialState:()=>Y,reducer:()=>J,requireCss:()=>i,requireScript:()=>s,useAutoComplete:()=>g,useBezierCurve:()=>k,useCircle:()=>x,useCircleMarker:()=>R,useContextMenu:()=>P,useControlBarControl:()=>z,useEllipse:()=>_,useEventProperties:()=>h,useGeolocation:()=>U,useHawkEyeControl:()=>Z,useInfoWindow:()=>V,useMap:()=>ee,useMapContext:()=>X,useMapTypeControl:()=>ae,useMarker:()=>ue,useMassMarks:()=>pe,usePolygon:()=>fe,usePolyline:()=>Ce,usePrevious:()=>M,useRectangle:()=>ge,useRenderDom:()=>y,useScaleControl:()=>be,useSetStatus:()=>f,useSettingProperties:()=>C,useText:()=>Se,useToolBarControl:()=>Te,useVisiable:()=>m,useWeather:()=>De});var o=r(787),t=r.n(o),n={};function i(e){var o=document&&(document.head||document.getElementsByTagName("head")[0]);return new Promise(((t,r)=>{if(document&&!(e in n)){var a=document.createElement("link");a.type="text/css",a.rel="stylesheet",a.href=e,a.onerror=t=>{o.removeChild(a),r(new URIError("The css "+e+" is no accessible."))},a.onload=()=>{n[e]=!0,t()},o.appendChild(a)}else t()}))}function s(e,o){void 0===o&&(o="_react_amap");var t=document&&(document.head||document.getElementsByTagName("head")[0]);return new Promise(((r,a)=>{if(document&&!(e in n)){var i=document.createElement("script");i.type="text/javascript",i.id=o,i.async=!0,i.defer=!0,i.src=e,i.onerror=o=>{t.removeChild(i),a(new URIError("The Script "+e+" is no accessible."))},i.onload=()=>{n[e]=!0,r()},t.appendChild(i)}else r()}))}var u=r(664);function l(e){return new Promise(((o,t)=>{window.setTimeout(o,e)}))}class c extends o.Component{constructor(e){if(super(e),this.isMountedOk=!1,this.state={loaded:!!window.AMap},this.handleError=e=>{this.isMountedOk&&this.setState({error:e})},this.finish=()=>{this.isMountedOk&&this.setState({loaded:!0})},null===e.akay)throw new TypeError("AMap: akay is required")}componentDidMount(){this.isMountedOk=!0;var{callbackName:e}=this.props;if(null==window.AMap){if(window[e])return void c.waitQueue.push([this.finish,this.handleError]);this.loadMap()}}componentWillUnmount(){this.isMountedOk=!1}render(){return this.state.loaded?this.props.children:this.props.fallback?this.props.fallback(this.state.error):this.state.error?(0,u.jsx)("div",{style:{color:"red"},children:this.state.error.message}):null}getScriptSrc(){var e=this.props,o=e.protocol||window.location.protocol;-1===o.indexOf(":")&&(o+=":");var t="";return e.plugin&&(t="&plugin="+e.plugin),o+"//"+e.hostAndPath+"?v="+e.version+"&key="+e.akay+"&callback="+e.callbackName+t}loadMap(){var o,t=this;return(o=function*(){var{callbackName:e}=t.props,o=t.getScriptSrc();window[e]=()=>{var e=c.waitQueue;c.waitQueue=[],e.forEach((e=>e[0]())),t.finish()};for(var n=0;n<3;n++)try{yield s(o);break}catch(a){if(2===n){var r=function(){var e=new Error("Failed to load AMap: "+a.message),o=c.waitQueue;return c.waitQueue=[],o.forEach((o=>o[1](e))),t.handleError(e),{v:void 0}}();if("object"===typeof r)return r.v}yield l(1e3*n)}},function(){var t=this,n=arguments;return new Promise((function(r,a){var i=o.apply(t,n);function s(o){e(i,r,a,s,u,"next",o)}function u(o){e(i,r,a,s,u,"throw",o)}s(void 0)}))})()}}function p(){return p=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},p.apply(this,arguments)}function d(e,o){if(null==e)return{};var t,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],o.indexOf(t)>=0||(r[t]=e[t]);return r}c.defaultProps={protocol:/^file:/.test(window.location.protocol)?"https":window.location.protocol,akay:"",hostAndPath:"webapi.amap.com/maps",version:"2.0",callbackName:"load_amap_sdk",plugin:""},c.waitQueue=[];var v=r(156);function f(e,t,n){void 0===t&&(t={}),void 0===n&&(n=[]),n.forEach((n=>{var r=n,[a,i]=(0,o.useState)(t[r]);(0,o.useEffect)((()=>{if(e&&void 0!==t[r]&&t[r]!==a){var o=e.getStatus();e.setStatus(p({},o,{[r]:t[r]})),i(t[r])}}),[e,t[r]])}))}function m(e,t){var[n,r]=(0,o.useState)(t);(0,o.useEffect)((()=>{e&&void 0!==t&&(t?e.show&&e.show():e.hide&&e.hide(),t!==n&&r(t))}),[e,t])}function M(e){var t=(0,o.useRef)();return(0,o.useEffect)((()=>{t.current=e})),t.current}function h(e,t,n,r){void 0===t&&(t={}),void 0===n&&(n=[]),n.forEach((n=>{var r=n,a=t[r];(0,o.useEffect)((()=>{if(e){var o=n.toLocaleLowerCase().replace(/^on/,"");return a&&o&&e.on(o,a),()=>{o&&a&&e.off(o,a)}}}),[e,t[r]])}))}function C(e,t,n){void 0===e&&(e={}),void 0===t&&(t={}),void 0===n&&(n=[]),n.forEach((n=>{var r="set"+n,a=""+n.charAt(0).toLowerCase()+n.slice(1),[i,s]=(0,o.useState)(t[a]);(0,o.useEffect)((()=>{e&&void 0!==t[a]&&t[a]!==i&&e[r]&&"function"===typeof e[r]&&(e[r](t[a]),s(t[a]))}),[e,t[a]])}))}function y(e){var t=(0,o.useRef)(document.createElement("div"));return(0,o.useLayoutEffect)((()=>{(0,v.render)((0,u.jsx)(o.Fragment,{children:e.children}),t.current)}),[e.children]),{container:t.current}}var w=["map"],g=function(e){void 0===e&&(e={});var t=d(e,w),[n,r]=(0,o.useState)();return(0,o.useEffect)((()=>{var e;if(AMap&&!n)return AMap.plugin(["AMap.AutoComplete"],(()=>{e=new AMap.AutoComplete(p({},t)),r(e)})),()=>{e&&r(void 0)}}),[]),C(n,e,["Type","City","CityLimit"]),h(n,e,["onChoose","onSelect"]),{autoComplete:n,setAutoComplete:r}},E=t().forwardRef(((e,t)=>{var{autoComplete:n}=g(e);return(0,o.useImperativeHandle)(t,(()=>p({},e,{autoComplete:n}))),null})),b=["map","visiable"],k=function(e){void 0===e&&(e={});var{map:t,visiable:n}=e,r=d(e,b),[a,i]=(0,o.useState)();return(0,o.useEffect)((()=>{if(AMap&&t&&!a){var e=new AMap.BezierCurve(p({},r));return t.add(e),i(e),()=>{e&&(t&&t.removeLayer(e),i(void 0))}}}),[t]),m(a,n),C(a,e,["Options","Path","ExtData","ExtData"]),h(a,e,["onHide","onShow","onDblClick","onMouseOver","onMouseUp","onMouseDown","onclick","onTouchEnd","onTouchMove","onTouchStart","onRightClick","onMouseOut"]),{bezierCurve:a,setBezierCurve:i}},A=t().forwardRef(((e,t)=>{var{bezierCurve:n}=k(e);return(0,o.useImperativeHandle)(t,(()=>p({},e,{bezierCurve:n}))),null})),S=["map","visiable"],x=function(e){void 0===e&&(e={});var{map:t,visiable:n}=e,r=d(e,S),[a,i]=(0,o.useState)();return(0,o.useEffect)((()=>{if(AMap&&t&&!a){var e=new AMap.Circle(p({},r));t.add(e),i(e)}return()=>{a&&(t&&t.remove(a),i(void 0))}}),[t]),m(a,n),C(a,e,["Center","Raius","Options","ExtData"]),h(a,e,["onHide","onShow","onRightClick","onClick","onTouchEnd","onDblClick","onTouchMove","onTouchStart","onMouseOut","onMouseOver","onMouseUp","onMouseDown"]),{circle:a,setCircle:i}},O=t().forwardRef(((e,t)=>{var{circle:n}=x(e);return(0,o.useImperativeHandle)(t,(()=>p({},e,{circle:n}))),null})),T=["map","visiable"],R=function(e){void 0===e&&(e={});var{map:t,visiable:n}=e,r=d(e,T),[a,i]=(0,o.useState)();return(0,o.useEffect)((()=>{if(AMap&&t&&!a){var e=new AMap.CircleMarker(p({},r));return t.add(e),i(e),()=>{e&&(t&&t.removeLayer(e),i(void 0))}}}),[t]),m(a,n),C(a,e,["Center","Raius","zIndex","Bubble","Cursor","StrokeColor","StrokeOpacity","StrokeWeight","FillColor","FillOpacity","Draggable","ExtData"]),h(a,e,["onHide","onShow","onMouseover","onTouchend","onClick","onTouchmove","onRightclick","onMouseup","onMouseout","onTouchstart","onMousedown","onDblclick"]),{circleMarker:a,setCircleMarker:i}},D=t().forwardRef(((e,t)=>{var{circleMarker:n}=R(e);return(0,o.useImperativeHandle)(t,(()=>p({},e,{circleMarker:n}))),null})),I=["map","position"],P=function(e){void 0===e&&(e={});var{map:t,position:n}=e,r=d(e,I),[a,i]=(0,o.useState)();return(0,o.useEffect)((()=>{if(AMap&&t&&!a){var e=new AMap.ContextMenu(p({},r));i(e);var o=o=>e.open(t,n||o.lnglat);return t.on("rightclick",o),()=>{e&&(t.off("rightclick",o),t&&t.removeLayer(e),i(void 0))}}}),[t]),h(a,e,["onOpen","onClose"]),{contextMenu:a,setContextMenu:i}},j=function(){};var H=t().forwardRef(((e,n)=>{var{contextMenu:r}=P(e);(0,o.useImperativeHandle)(n,(()=>p({},e,{contextMenu:r})));var a=t().Children.toArray(e.children);return(0,u.jsx)(o.Fragment,{children:AMap&&r&&a.map(((o,n)=>t().isValidElement(o)?t().cloneElement(o,p({},o.props,{AMap:AMap,map:e.map,contextMenu:r,key:n})):null))})}));function z(e){void 0===e&&(e={});var[t,n]=(0,o.useState)(),{map:r,position:a,visiable:i,offset:s}=e;return(0,o.useEffect)((()=>{var e;if(r&&!t)return r.plugin(["AMap.ControlBar","AMap.HawkEye"],(()=>{e=new AMap.ControlBar({offset:s,position:a}),r.addControl(e),n(e)})),()=>{e&&r.removeControl(e)}}),[r]),m(t,i),{controlBarControl:t,setControlBarControl:n}}H.Item=function(e){void 0===e&&(e={});var{text:t="",onClick:n=j}=e;return(0,o.useEffect)((()=>(e.contextMenu&&e.contextMenu.addItem(t,n,1),()=>{e.contextMenu&&e.contextMenu.removeItem(t,n)})),[e.contextMenu,e.text,e.onClick]),null};var B=t().forwardRef(((e,t)=>{var{controlBarControl:n}=z(e);return(0,o.useImperativeHandle)(t,(()=>p({},e,{controlBarControl:n})),[n]),null})),L=["map","visiable"],_=function(e){void 0===e&&(e={});var{map:t,visiable:n}=e,r=d(e,L),[a,i]=(0,o.useState)();return(0,o.useEffect)((()=>{if(AMap&&t&&!a){var e=new AMap.Ellipse(p({},r));return t.add(e),i(e),()=>{e&&(t&&t.removeLayer(e),i(void 0))}}}),[t]),m(a,n),C(a,e,["Center","Radius","Options","ExtData"]),h(a,e,["onHide","onShow","onClick","onDblClick","onRightClick","onMouseOut","onMouseOver","onMouseUp","onMouseDown","onTouchEnd","onTouchMove","onTouchStart"]),{ellipse:a,setEllipse:i}},W=t().forwardRef(((e,t)=>{var{ellipse:n}=_(e);return(0,o.useImperativeHandle)(t,(()=>p({},e,{ellipse:n}))),null})),N=["map","type","onComplete","onError"],U=function(e){void 0===e&&(e={});var{map:t,type:n="position",onComplete:r,onError:a}=e,i=d(e,N),[s,u]=(0,o.useState)();function l(e,o){"complete"===e&&r?r(o):a&&a(o)}return(0,o.useEffect)((()=>{var e;if(AMap&&!s)return AMap.plugin(["AMap.Geolocation"],(()=>{e=new AMap.Geolocation(p({},i)),u(e)})),()=>{e&&u(void 0)}}),[AMap]),(0,o.useMemo)((()=>{if(/^(position|cityInfo)$/.test(n)){var e="position"===n?"getCurrentPosition":"getCityInfo";s&&t?(s[e](l),t.addControl(s)):s&&s[e](l)}}),[s]),{geolocation:s,setGeolocation:u}},F=t().forwardRef(((e,t)=>{var{geolocation:n}=U(e);return(0,o.useImperativeHandle)(t,(()=>p({},e,{geolocation:n}))),null})),q=["map","offset","visiable"];function Z(e){void 0===e&&(e={});var[t,n]=(0,o.useState)(),{map:r,offset:a,visiable:i}=e,s=d(e,q);return(0,o.useEffect)((()=>{var e;if(r&&!t)return r.plugin(["AMap.HawkEye"],(()=>{e=new AMap.HawkEye(p({offset:a},s)),r.addControl(e),n(e)})),()=>{e&&r&&(r.removeLayer(e),n(void 0))}}),[r]),m(t,i),{hawkEyeControl:t,setHawkEyeControl:n}}var Q=t().forwardRef(((e,t)=>{var{hawkEyeControl:n}=Z(e);return(0,o.useImperativeHandle)(t,(()=>p({},e,{hawkEyeControl:n})),[n]),null})),G=["map","visiable","position"],V=function(e){void 0===e&&(e={});var{map:t,visiable:n,position:r}=e,a=d(e,G),[i,s]=(0,o.useState)(n),[u,l]=(0,o.useState)(),{container:c}=y({children:e.children});return(0,o.useEffect)((()=>{if(AMap&&t&&!u){var o=t.getCenter();e.children&&(a.content=c);var n=new AMap.InfoWindow(p({},a,{position:r||o}));return l(n),i&&n.open(t,r||o),()=>{n&&(t&&t.remove(n),l(void 0))}}}),[t]),(0,o.useEffect)((()=>{u&&u.setContent(e.children?c:a.content||"")}),[c,a.content,u]),(0,o.useMemo)((()=>{if(i!==n&&u&&t)if(s(n),n){var e=t.getCenter();u.open(t,r||e)}else u.close()}),[n,u]),(0,o.useEffect)((()=>{if(t&&u&&n){var e=t.getCenter();u.open(t,r||e)}}),[r]),C(u,e,["Content","Anchor","Size"]),h(u,e,["onOpen","onClose","onChange"]),{isOpen:i,setIsOpen:s,infoWindow:u,setInfoWindow:l}},$=t().forwardRef(((e,t)=>{var{infoWindow:n}=V(e);return(0,o.useImperativeHandle)(t,(()=>p({},e,{infoWindow:n}))),null})),Y={map:void 0,AMap:void 0,container:void 0},J=(e,o)=>p({},e,o),K=t().createContext({state:Y,dispatch:()=>null});function X(){var{state:e,dispatch:t}=(0,o.useContext)(K);return p({},e,{state:e,dispatch:t})}var ee=function(e){void 0===e&&(e={});var t=p({},e),[n,r]=(0,o.useState)(),[a,i]=(0,o.useState)(e.zoom||15),[s,u]=(0,o.useState)(e.container),{dispatch:l}=(0,o.useContext)(K);return(0,o.useMemo)((()=>{if(s&&!n&&AMap){s.className="react-amap-wapper",s.style.height="100%",s.style.width="100%";var e=new AMap.Map(s,p({zoom:a},t));r(e)}return()=>{n&&(n.destroy(),n.clearMap(),n.clearInfoWindow(),n.clearLimitBounds(),r(void 0))}}),[s,n]),(0,o.useEffect)((()=>(n&&s&&l({map:n,container:s,AMap:AMap}),()=>{l({map:void 0,container:void 0,AMap:void 0})})),[n,s]),(0,o.useMemo)((()=>{n&&"number"===typeof e.zoom&&a!==e.zoom&&e.zoom>=2&&e.zoom<=20&&(i(e.zoom),n.setZoom(e.zoom))}),[a,e.zoom]),(0,o.useMemo)((()=>{e.center&&n&&n.setCenter(e.center)}),[n,e.center]),f(n,e,["dragEnable","zoomEnable","jogEnable","pitchEnable","rotateEnable","animateEnable","keyboardEnable"]),C(n,e,["Zoom","LabelzIndex","Layers","City","Bounds","LimitBounds","Lang","Rotation","DefaultCursor","MapStyle","Features","DefaultLayer","Pitch"]),h(n,e,["onMouseMove","onZoomChange","onMapMove","onMouseWheel","onZoomStart","onMouseOver","onMouseOut","onDblClick","onClick","onZoomEnd","onMoveEnd","onMouseUp","onMouseDown","onRightClick","onMoveStart","onDragStart","onDragging","onDragEnd","onHotspotOut","onHotspotOver","onTouchStart","onComplete","onHotspotClick","onTouchMove","onTouchEnd","onResize"]),{map:n,setMap:r,zoom:a,setZoom:i,container:s,setContainer:u}},oe=["className","style","children"];function te(e){var[t,n]=(0,o.useReducer)(J,Y);return(0,u.jsx)(K.Provider,{value:p({},t,{state:t,dispatch:n}),children:e.children})}var ne=(0,o.forwardRef)(((e,t)=>{var{className:n,style:r,children:a}=e,i=d(e,oe),[s,l]=(0,o.useReducer)(J,Y),c=(0,o.useRef)(null),{setContainer:v,container:f,map:m}=ee(p({container:i.container||c.current},i));(0,o.useEffect)((()=>v(c.current)),[c.current]),(0,o.useImperativeHandle)(t,(()=>p({},i,{map:m,AMap:AMap,container:i.container||c.current})),[m]);var M=o.Children.toArray(a);return(0,o.useEffect)((()=>{m&&l({map:m,container:c.current,AMap:AMap})}),[m]),(0,u.jsxs)(K.Provider,{value:p({},s,{state:s,dispatch:l}),children:[!i.container&&(0,u.jsx)("div",{ref:c,className:n,style:p({fontSize:1,height:"100%"},r)}),AMap&&m&&"function"===typeof a&&a({AMap:AMap,map:m,container:f}),AMap&&m&&M.map(((e,t)=>(0,o.isValidElement)(e)?"string"===typeof e?(0,o.cloneElement)((0,u.jsx)(o.Fragment,{children:e}),{key:t}):e.type&&"string"===typeof e.type?(0,o.cloneElement)(e,{key:t}):(0,o.cloneElement)(e,p({},e.props,{AMap:AMap,map:m,container:f,key:t})):null))]})})),re=["map","visiable","defaultType"];function ae(e){void 0===e&&(e={});var[t,n]=(0,o.useState)(),{map:r,visiable:a,defaultType:i=0}=e,s=d(e,re);return(0,o.useEffect)((()=>{var e;if(r&&!t)return r.plugin(["AMap.MapType"],(()=>{e=new AMap.MapType(p({defaultType:i},s)),r.addControl(e),n(e)})),()=>{e&&r.removeControl(e)}}),[r]),m(t,a),{mapTypeControl:t,setMapTypeControl:n}}var ie=t().forwardRef(((e,t)=>{var{mapTypeControl:n}=ae(e);return(0,o.useImperativeHandle)(t,(()=>p({},e,{mapTypeControl:n})),[n]),null})),se=["visiable","children"],ue=function(e){void 0===e&&(e={});var{visiable:t}=e,n=d(e,se),{map:r}=X(),[a,i]=(0,o.useState)(),{container:s}=y({children:e.children});return(0,o.useEffect)((()=>{if(!a&&r){e.children&&(n.content=s);var o=new AMap.Marker(p({},n));r.add(o),i(o)}return()=>{a&&(a.remove(),i(void 0))}}),[r,a]),(0,o.useEffect)((()=>{a&&a.setContent(e.children?s:e.content||"")}),[e.children,s,a]),m(a,t),C(a,e,["Path","Anchor","Offset","Animation","Clickable","Position","Angle","Label","zIndex","Icon","Draggable","Cursor","Content","Map","Title","Top","Shadow","Shape","ExtData"]),h(a,e,["onClick","onDblClick","onRightClick","onMouseMove","onMouseOver","onMouseOut","onMouseDown","onMouseUp","onDragStart","onDragging","onDragEnd","onMoving","onMoveEnd","onMoveAlong","onTouchStart","onTouchMove","onTouchEnd"]),{marker:a,setMarker:i}},le=(0,o.forwardRef)(((e,t)=>{var{marker:n}=ue(e);return(0,o.useImperativeHandle)(t,(()=>p({},e,{marker:n})),[n]),null})),ce=["map","visiable"],pe=function(e){void 0===e&&(e={});var{map:t,visiable:n}=e,r=d(e,ce),{opacity:a=.8,zIndex:i=1111,style:s,data:u}=r||{},[l,c]=(0,o.useState)();return(0,o.useEffect)((()=>{if(AMap&&t&&!l){var e=s;e||(e=[{url:"https://webapi.amap.com/images/mass/mass0.png",anchor:new AMap.Pixel(6,6),size:new AMap.Size(11,11),zIndex:3},{url:"https://webapi.amap.com/images/mass/mass1.png",anchor:new AMap.Pixel(4,4),size:new AMap.Size(7,7),zIndex:2},{url:"https://webapi.amap.com/images/mass/mass2.png",anchor:new AMap.Pixel(3,3),size:new AMap.Size(5,5),zIndex:1}]);var o=new AMap.MassMarks(u||[],{opacity:a,zIndex:i,style:e});return c(o),o.setMap(t),()=>{o&&(o.clear(),c(void 0))}}}),[t]),m(l,n),C(l,e,["Map","Data","Style","Opacity","zIndex","Zooms"]),h(l,e,["onClick","onDblClick","onMouseMove","onMouseOut","onMouseUp","onMouseDown","onMouseOver","onTouchStart","onTouchEnd"]),{massMarks:l,setMassMarks:c}},de=t().forwardRef(((e,t)=>{var{massMarks:n}=pe(e);return(0,o.useImperativeHandle)(t,(()=>p({},e,{massMarks:n})),[n,e]),null})),ve=["map","visiable"],fe=function(e){void 0===e&&(e={});var{map:t,visiable:n}=e,r=d(e,ve),[a,i]=(0,o.useState)();return(0,o.useEffect)((()=>{if(AMap&&t&&!a){var e=new AMap.Polygon(p({},r));t.add(e),i(e)}}),[t]),m(a,n),C(a,e,["ExtData","ExtData"]),h(a,e,["onClick","onDblClick","onRightClick","onHide","onShow","onMouseDown","onMouseUp","onMouseOver","onMouseOut","onChange","onTouchStart","onTouchMove","onTouchEnd"]),{polygon:a,setPolygon:i}},me=(0,o.forwardRef)(((e,t)=>{var{children:n}=e,{polygon:r}=fe(e);return(0,o.useImperativeHandle)(t,(()=>p({},e,{polygon:r}))),n&&(0,o.isValidElement)(n)?(0,o.cloneElement)(n,p({},e,{polygon:r})):null})),Me=(0,o.forwardRef)(((e,t)=>{var{active:n,map:r,polygon:a}=e,[i,s]=(0,o.useState)(!0),[u,l]=(0,o.useState)();return(0,o.useEffect)((()=>{if(a&&r&&!u&&AMap&&AMap.PolygonEditor){var e=new AMap.PolygonEditor(r,a);a.on("hide",(()=>s(!1))),a.on("show",(()=>s(!0))),l(e)}}),[a]),(0,o.useEffect)((()=>{u&&(i&&!n?u.close():i&&n?u.open():!i&&n&&u.close())}),[n,i]),h(u,e,["onEnd","onAddnode","onAdjust","onMove","onAdd"]),null})),he=["map","visiable"];function Ce(e){void 0===e&&(e={});var[t,n]=(0,o.useState)(),{map:r,visiable:a}=e,i=d(e,he);return(0,o.useEffect)((()=>{if(r&&!t){var e=new AMap.Polyline(p({},i));return r.add(e),n(e),()=>{e&&(r&&r.removeLayer(e),n(void 0))}}}),[r]),m(t,a),C(t,e,["Path","Options","Map","ExtData"]),h(t,e,["onHide","onShow","onMouseOut","onChange","onRightClick","onDblClick","onMouseDown","onClick","onMouseOver","onTouchEnd","onTouchMove","onTouchStart","onMouseUp"]),{polyline:t,setPolyline:n}}var ye=t().forwardRef(((e,t)=>{var{polyline:n}=Ce(e);return(0,o.useImperativeHandle)(t,(()=>p({},e,{polyline:n})),[n]),null})),we=["map","visiable"],ge=function(e){void 0===e&&(e={});var{map:t,visiable:n}=e,r=d(e,we),[a,i]=(0,o.useState)();return(0,o.useEffect)((()=>{if(AMap&&t&&!a){var e=new AMap.Rectangle(p({},r));return t.add(e),i(e),()=>{e&&(t&&t.removeLayer(e),i(void 0))}}}),[t]),m(a,n),C(a,e,["Bounds","Options","Map","ExtData"]),h(a,e,["onHide","onShow","onClick","onDblClick","onRightClick","onMouseOut","onMouseOver","onMouseUp","onMouseDown","onTouchEnd","onTouchMove","onTouchStart"]),{rectangle:a,setRectangle:i}},Ee=t().forwardRef(((e,t)=>{var{rectangle:n}=ge(e);return(0,o.useImperativeHandle)(t,(()=>p({},e,{rectangle:n}))),null}));function be(e){void 0===e&&(e={});var[t,n]=(0,o.useState)(),{map:r,position:a,visiable:i,offset:s}=e;return(0,o.useEffect)((()=>{var e;if(r&&!t)return r.plugin(["AMap.Scale"],(()=>{e=new AMap.Scale({offset:s,position:a}),r.addControl(e),n(e)})),()=>{e&&r.removeControl(e)}}),[r]),m(t,i),{scaleControl:t,setScaleControl:n}}var ke=t().forwardRef(((e,t)=>{var{scaleControl:n}=be(e);return(0,o.useImperativeHandle)(t,(()=>p({},e,{scaleControl:n})),[n]),null})),Ae=["map","visiable"],Se=function(e){void 0===e&&(e={});var{map:t,visiable:n}=e,r=d(e,Ae),[a,i]=(0,o.useState)();return(0,o.useEffect)((()=>{if(AMap&&t&&!a){var e=new AMap.Text(p({},r));return t.add(e),i(e),()=>{e&&(e.remove(),i(void 0))}}}),[t]),m(a,n),C(a,e,["Style","Title","Clickable","Draggable","Map","Position","Offset","Angle","zIndex","Top","Cursor","ExtData"]),h(a,e,["onMoving","onTouchMove","onTouchEnd","onMoveaLong","onTouchStart","onMoveEnd","onClick","onDblClick","onRightClick","onMouseMove","onMouseOver","onMouseOut","onMouseDown","onMouseUp","onDragStart","onDragEnd","onDragging"]),{text:a,setText:i}},xe=["children"],Oe=(0,o.forwardRef)(((e,t)=>{var{children:n}=e,r=d(e,xe),a=(0,o.useMemo)((()=>document.createElement("div")),[]);(0,o.useEffect)((()=>(0,v.render)((0,u.jsx)(o.Fragment,{children:n}),a)),[n]);var i=n?a.innerHTML:e.text,{text:s}=Se(p({},r,{text:i}));return(0,o.useEffect)((()=>{n&&s&&s.setText(i||"")}),[n,s]),(0,o.useImperativeHandle)(t,(()=>p({},r,{text:s}))),null}));function Te(e){void 0===e&&(e={});var[t,n]=(0,o.useState)(),{map:r,position:a,visiable:i,offset:s}=e;return(0,o.useEffect)((()=>{var e;if(r&&!t)return r.plugin(["AMap.ToolBar"],(()=>{e=new AMap.ToolBar({offset:s,position:a}),r.addControl(e),n(e)})),()=>{e&&r.removeControl(e)}}),[r]),m(t,i),{toolBarControl:t,setToolBarControl:n}}var Re=t().forwardRef(((e,t)=>{var{toolBarControl:n}=Te(e);return(0,o.useImperativeHandle)(t,(()=>p({},e,{toolBarControl:n})),[n]),null})),De=function(e){void 0===e&&(e={});var{city:t="",type:n="live",onComplete:r,onError:a}=e,[i,s]=(0,o.useState)(),u="live"===n?"getLive":"getForecast";return(0,o.useEffect)((()=>{var e;if(AMap&&!i)return AMap.plugin(["AMap.Weather"],(()=>{e=new AMap.Weather,s(e)})),()=>{e&&s(void 0)}}),[]),(0,o.useMemo)((()=>{var e;i&&t&&n&&(e=i,n&&t&&/^(live|forecast)$/.test(n)&&e[u](t,((e,o)=>{e&&a?a(e):o&&r&&r(o)})))}),[i,t,n]),{weather:i,setWeather:s}},Ie=t().forwardRef(((e,t)=>{var{weather:n}=De(e);return(0,o.useImperativeHandle)(t,(()=>p({},e,{weather:n}))),null}))})(),a})()}));